## 基于 RT-Thread 本地局域网图片识别系列-开端

  在"5G"时代下，万物互联，物物互通，大数据分析，智能家居， AI，AIOT 等概念名词十分流行，也成为了当下的“弄潮儿”，确实科技时代的发展在近些年可算是一个突飞猛进的速度，科技时代下让一切都变得有可能。

  在开源精神的影响下，很多高级、有趣的项目都能在开源社区中找到，例如国内开源的物联网操作系统“RT-Thread" 不仅提供开源的嵌入式 os 系统，还有很丰富的软件包生态;还有在 GitHub 上开源的 ImageAI 项目，使用的是 python  语言，使用仅仅不到 二十行的代码，就可以实现简单的图像识别功能。在本系列的章节中，将会通过 qemu 模拟器创建一个运行 RT-Thread 系统的设备和 ububtu 虚拟机搭建图像识别的环境，使用到的语言有 c 语言、python 语言 和 flask 框架，有点像堆积木的感觉......

  开端中先分享一下虚拟机的环境搭建步骤中遇到的一些问题作为记录。

###  ubuntu 虚拟机搭建

ubuntu 虚拟机的安装教程，网上有很多，在这里就不作过多的阐述，注意的是需要安装的 ubuntu 系统的版本最好为 16.04 以上的。下面分享一些个人在搭建环境中的关键几个步骤。

* 一 安装 VMTOOLS （方便文件的拷贝，可以与宿主机共享文件夹）

需要把压缩包解压缩到 /home 目录下 执行安装 ./vmxxxx.pl  注意：要使用 root 权限

* 二 更新软件源：

1. 备份软件源：

sudo cp /etc/apt/sources.list /etc/apt/sources.list.backup

2.替换软件源：

sudo gedit /etc/apt/source.list

3.把原来的内容删掉改为下面的：

deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial main restricted

deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-updates main restricted

deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial universe

deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-updates universe

deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial multiverse

deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-updates multiverse

deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-backports main restricted universe multiverse

deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-security main restricted

deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-security universe

deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-security multiverse

4. 让软件源生效

sudo apt-get update

可能出现的问题：使用sudo apt-get update命令时出现如下错误：

E: Could not get lock /var/lib/apt/lists/lock - open (11: Resource temporarily unavailable)

Unable to lock directory /var/lib/apt/lists

解决办法：

使用命令：

sudo rm /var/lib/apt/lists/lock

* 三 安装 Image AI

  image AI 的安装 参考下面的官网连接的文档进行操作

  <https://imageai-cn.readthedocs.io/zh_CN/latest/ImageAI.html>

  可以遇到下面的问题

  （1）遇到 pip3 版本过低的问题：

  解决方法：

  sudo pip3 install --upgrade pip3

  sudo gedit /usr/bin/pip3

  修改为：

  ```
  #!/usr/bin/python3
  
  \# GENERATED BY DEBIAN
  
  import sys
  # Run the main entry point, similarly to how setuptools does it, but because
  # we didn't install the actual entry point from setup.py, don't use the
  
  # pkg_resources API.
  
  from pip import __main__
  
  if __name__ == '__main__':
  
  ​	sys.exit(__main__._main())
  
  #from pip import main
  
  #if __name__ == '__main__':
  #    sys.exit(main())
  
  
  ```

  保存退出即可。

  （2）在安装 matplotlib 时提示 错误，原因是matplotlib 的版本过高，

  通过 sudo pip3 install matplotlib==3.0指定即可。

  ## 总结

  通过上面的操作就可以在 ubuntu 虚拟机中成功搭建 Ima'geAi 的环境，相关的 ImageAi 使用可以参考官网提供的说明文档进行操作，接下来将会分享使用 qemu 模拟运行”RT-Thread“ 系统的设备上传文件到虚拟机中进行图像识别的功能。							

  ​																					

